System.register([__v__("/js/vendors.nomodule.js"),__v__("/js/main.nomodule.js")],(function(e,t){"use strict";var o,n,r,l,c,i,a,s,d,p,u,h,m,g,y,v,w,C,b,k,f,N,S,x,I,j,G,O,B,R,L,P,T,Y,q,X,z,D,E,A,H,W,F,M;return{setters:[function(e){o=e.x,n=e.h,r=e.y,l=e.u,c=e.b,i=e.A,a=e.P,s=e.B},function(e){d=e.r,p=e.a,u=e.b,h=e.c,m=e.i}],execute:function(){g=e=>e?{width:e.offsetWidth,height:e.offsetHeight}:{width:0,height:0},y=({gameEngine:e})=>{const[t,o]=n(!1);r((()=>{o(e.isStopped()),e.onStoppedStateChange=e=>{o(e)}}),[]);const[i,a]=n(!1);return r((()=>{a(e.isPaused()),e.onPausedStateChange=e=>{a(e)}}),[]),r((()=>(e.pauseGameLoop(),()=>{e.resumeGameLoop()})),[]),l(c,{children:[l(v,{stopped:t,paused:i,onStartGameRequested:()=>{e.startGameLoop()},onResumeRequested:()=>{e.resumeGameLoop()},onPauseRequested:()=>{e.pauseGameLoop()}}),l(w,{paused:i,onClick:()=>{e.nextGameStep()}})]})},v=({stopped:e,paused:t,onStartGameRequested:o,onResumeRequested:n,onPauseRequested:r})=>l("button",e?{className:"devtools-input",onClick:o,title:"Restart game",children:l("svg",{viewBox:"0 0 100 100",width:"32",height:"32",children:l("polygon",{points:"40,30 70,50, 40,70",stroke:"currentColor",strokeWidth:"5",fill:"transparent"})})}:t?{className:"devtools-input",onClick:n,title:"Play game",children:l("svg",{viewBox:"0 0 100 100",width:"32",height:"32",children:l("polygon",{points:"40,30 70,50, 40,70",fill:"currentColor"})})}:{className:"devtools-input",onClick:r,title:"Pause game",children:l("svg",{viewBox:"0 0 50 50",children:l("path",{d:"M30 17a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V18a1 1 0 0 1 1-1h2zm-8 0a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-2a1 1 0 0 1-1-1V18a1 1 0 0 1 1-1h2z"})})}),w=({paused:e,onClick:t})=>l("button",{className:"devtools-input",disabled:!e,onClick:t,title:"Play one step",children:l("svg",{viewBox:"0 0 100 100",children:l("g",{transform:"translate(-5)",children:[l("polygon",{points:"40,30 70,50, 40,70",fill:"currentColor"}),l("line",{x1:"70",y1:"30",x2:"70",y2:"70",strokeWidth:"6",stroke:"currentColor"})]})})}),C=({world:e,gameObjectInspected:t})=>{if(!t)return"no game object inspected";const[o,i]=n(0);return r((()=>{const t={update:()=>{i((e=>e+1))}};return e.addGameObject(t),()=>{e.removeGameObject(t)}}),[]),l(c,{children:[l("span",{children:["name: ",t.name]}),l("button",{onClick:()=>{console.log(t)},children:"Log in console"}),l(b,{updateCount:o,gameObjectInspected:t}),l(S,{updateCount:o,gameObjectInspected:t}),l(I,{updateCount:o,gameObjectInspected:t})]})},b=({updateCount:e,gameObjectInspected:t})=>"rectangle"===t.shapeName?l(G,{updateCount:e,object:t,propertyGroupTitle:"rectangle",propertyGroupNames:f}):"circle"===t.shapeName?l(G,{object:t,propertyGroupTitle:"circle",propertyGroupNames:N}):null,k=["centerX","centerY","angle"],f=[...k,"width","height"],N=[...k,"radius"],S=({gameObjectInspected:e})=>e.draw?l(G,{object:e,propertyGroupTitle:"styles",propertyGroupNames:x}):null,x=["strokeStyle","fillStyle","alpha","lineWidth"],I=({gameObjectInspected:e})=>e.rigid?l(G,{object:e,propertyGroupTitle:"physics",propertyGroupNames:j}):null,j=["velocityX","velocityY","velocityAngle","mass","friction","frictionAmbient","restitution","rotationInertiaCoef"],G=({object:e,propertyGroupTitle:t,propertyGroupNames:o})=>l("details",{className:"devtools-details-category",children:[l("summary",{children:t}),l("ol",{children:o.map((t=>{const o=e[t];return l("li",{children:l(O,{object:e,propertyName:t,propertyValue:o})},t)}))})]}),O=({object:e,propertyName:t,propertyValue:o})=>"number"==typeof o?l("span",{children:[t,":",l(B,{value:o,onChange:o=>{e[t]=o}})]}):"boolean"==typeof o||"string"==typeof o?l("span",{children:[t,": ",o]}):null,B=({value:e,onChange:t})=>{const o=i(),[c,a]=n(!1),[s,d]=n(e),p=String(s).length+1;return r((()=>{d(e)}),[e]),l("input",{className:"input-editable",ref:o,type:"number",readOnly:!c,style:{width:12*p},onKeyDown:e=>{const t=o.current;"Enter"===e.key&&t.blur()},onChange:()=>{d(o.current.value)},onBlur:()=>{const e=R(o.current);d(e),t(e),a(!1)},onDoubleClick:()=>{a(!0)},value:s})},R=e=>{const{value:t}=e;return""===t?0:parseFloat(t)},L=({world:e,inspecting:t,gameObjectInspected:o,onResizeTop:n,onInspectStart:r,onInspectStop:i,onClickLayoutBottomSmall:a,onClickLayoutBottomMedium:s,onClickLayoutBottomBig:d,onClickCloseDevtools:p})=>l(c,{children:[l(P,{onResizeTop:n}),l("div",{className:"devtools-head",children:[l(T,{inspecting:t,onInspectStart:r,onInspectStop:i}),l(y,{gameEngine:window.gameEngine}),l("div",{className:"spacer"}),l(z,{onClick:p})]}),l("div",{className:"devtools-body",children:[l("div",{className:"devtools-left"}),l("div",{className:"devtools-center",children:l(C,{world:e,gameObjectInspected:o})}),l("div",{className:"devtools-right"})]}),l("div",{className:"devtools-foot",children:[l(Y,{onClick:a}),l(q,{onClick:s}),l(X,{onClick:d})]})]}),P=({onResizeTop:e})=>{const[t,o]=(()=>{const e=i(),[t,o]=n({type:"end"});return r((()=>{const t=e.current;let n=()=>{},r=()=>{};const l=p(t,"mousedown",(e=>{o({type:"start"}),r=p(document,"mouseup",(()=>{n(),o({type:"end"})}));const t=e.pageX,l=e.pageY;let c=t,i=l;n=p(document,"mousemove",(e=>{const t=e.pageX,n=e.pageY,r=t-c,l=n-i;c=t,i=n,o({type:"move",data:{moveX:r,moveY:l}})}))}));return()=>{l(),n(),r()}}),[]),[e,t]})(),c=i(o);return r((()=>{c.current=o,"move"===o.type&&e(o.data)}),[o]),l("div",{ref:t,className:"devtools-resize-top"})},T=({inspecting:e,onInspectStart:t,onInspectStop:o})=>(r((()=>e?p(document,"keydown",(e=>{"Escape"===e.key&&(e.preventDefault(),o())})):null),[e]),l("label",{className:"devtools-input",children:[l("input",{type:"checkbox",checked:e,onChange:e=>{e.target.checked?t():o()}}),l("svg",{viewBox:"0 0 100 100",width:"32",height:"32",children:l("g",{children:[l("rect",{x:"20",y:"20",width:"60",height:"50",rx:"5",ry:"5",stroke:"currentColor",strokeWidth:"5",fill:"transparent"}),l("polygon",{transform:"translate(20, 20)",points:"40,30 70,50, 40,70",fill:"currentColor"})]})})]})),Y=({onClick:e})=>l("button",{onClick:e,children:l("svg",{viewBox:"0 0 100 100",children:l("g",{children:l("rect",{x:"10",y:"80",width:"80",height:"20",fill:"currentColor"})})})}),q=({onClick:e})=>l("button",{onClick:e,children:l("svg",{viewBox:"0 0 100 100",children:l("g",{children:l("rect",{x:"10",y:"50",width:"80",height:"50",fill:"currentColor"})})})}),X=({onClick:e})=>l("button",{onClick:e,children:l("svg",{viewBox:"0 0 100 100",children:l("g",{children:l("rect",{x:"10",y:"20",width:"80",height:"80",fill:"currentColor"})})})}),z=({onClick:e})=>l("button",{name:"button-close-devtools",onClick:e,children:l("svg",{viewBox:"0 0 24 24",children:l("path",{fill:"currentColor",d:"M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})})}),D=(e,t)=>{const o=u(e),{width:n,height:r,angle:l}=e;t.beginPath(),t.translate(o.x,o.y),t.rotate(l),t.rect(0,0,n,r),t.closePath()},E=(e,t)=>{const o=(({centerX:e,centerY:t,radius:o,angle:n})=>d({x:e,y:t-o},{centerX:e,centerY:t,angle:n}))(e),{centerX:n,centerY:r,radius:l}=e;t.beginPath(),t.arc(n,r,l,0,2*Math.PI,!0),t.moveTo(o.x,o.y),t.lineTo(n,r),t.closePath()},A=({world:e,worldNode:t,gameObjectToHighlight:o})=>{const n=t.querySelector(".world-view-wrapper"),c=i();return r((()=>{const e=c.current,t=e.getContext("2d");t.clearRect(0,0,e.width,e.height),o&&(t.save(),((e,t)=>{"rectangle"!==e.shapeName?"circle"!==e.shapeName||E(e,t):D(e,t)})(o,t),t.fillStyle="orange",t.globalAlpha=.4,t.fill(),t.restore())}),[o]),a(l("canvas",{ref:c,width:e.worldWidth,height:e.worldHeight}),n)},H=({world:e,worldNode:t,onInspectHover:o,onInspectSelect:n})=>{const l=t.querySelector(".world-view-wrapper");return r((()=>p(l,"mousemove",(t=>{const n={x:t.layerX,y:t.layerY},r=e.gameObjectFromPoint(n);o(r)}))),[]),r((()=>p(l,"click",(t=>{const o={x:t.layerX,y:t.layerY},r=e.gameObjectFromPoint(o);n(r)}))),[]),null},W=({world:e,worldNode:t})=>{const i=F()||{opened:!1,height:0},[a,s]=n(i.opened),[d,u]=n(0),[m,y]=n(0),[v,w]=n(i.height),[C,b]=n(!1),k=(e=>{const[t,n]=o.useState(g(e.current));return o.useLayoutEffect((()=>{const t=e.current;if(!t)return null;let o;const r=new ResizeObserver((()=>{o=window.requestAnimationFrame((()=>{n(g(t))}))}));return r.observe(t),()=>{r.disconnect(),window.cancelAnimationFrame(o)}}),[e.current]),t})({current:t}).height,f=()=>{s(!1)};r((()=>{e.devtools.opened=a}),[a]),r((()=>{localStorage.setItem("game-devtool",JSON.stringify({opened:a,height:v}))}),[a,v]),r((()=>{const e=p(document,"keydown",(e=>{e.metaKey&&"KeyI"===e.code&&(e.preventDefault(),a?f():(b(!0),s(!0)))}));return()=>{e()}}),[a]),r((()=>{y(h(v,100,k-150))}),[k,v]),r((()=>{u(a?h(k-m,150):k)}),[k,m,a]),r((()=>{t.children[0].style.height="".concat(d,"px")}),[d]),r((()=>{t.children[1].style.height="".concat(m,"px")}),[m]),r((()=>{t.children[1].style.display=a?"":"none"}),[a]);const[N,S]=n(e.hero),[x,I]=n(null);return l(c,{children:[C?l(H,{world:e,worldNode:t,onInspectHover:e=>{I(e)},onInspectSelect:e=>{S(e),I(null),b(!1)}}):null,x?l(A,{world:e,worldNode:t,gameObjectToHighlight:x}):null,a?l(L,{world:e,inspecting:C,gameObjectInspected:N,onInspectStart:()=>{b(!0)},onInspectStop:()=>{b(!1)},onResizeTop:e=>{const{moveY:t}=e;w((e=>e+-1*t))},onClickLayoutBottomSmall:()=>{w(.2*k)},onClickLayoutBottomMedium:()=>{w(.5*k)},onClickLayoutBottomBig:()=>{w(.8*k)},onClickCloseDevtools:()=>{f()}}):null]})},F=()=>{const e=localStorage.getItem("game-devtool");try{return JSON.parse(e)}catch(e){return console.warn(e),null}},M=new URL(__v__("/css/devtools.css"),t.meta.url),e("injectDevtools",(({world:e,worldNode:t})=>{m(M);const o=document.createElement("div");o.className="world-devtools",t.appendChild(o),s(l(W,{world:e,worldNode:t}),o)}))}}}));